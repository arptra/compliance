input:
  # Режим 1: единый файл (внутри него baseline/target выбираются фильтрами ниже)
  path: "data/sample.xlsx"

  # Режим 2: список baseline-файлов + отдельный файл/список target-периода
  baseline_paths: []
  december_path: null
  december_paths: []

  message_col: "message"
  message_cols: null

  date_col: "date"
  date_format: null
  month_col: null

  baseline:
    mode: "last_n_months"
    n_months: 6
    start: null
    end: null
    filter_col: null
    filter_value: null

  december:
    mode: "month_value"
    month_value: "2025-12"
    start: null
    end: null
    filter_col: null
    filter_value: null

preprocess:
  lemmatize: false
  use_razdel: true
  remove_placeholders: true
  placeholder_patterns:
    - "<[^>]{1,80}>"
    - "\\*{2,}"
    - "(?i)\\b(x{2,}|х{2,}|_+|#+)\\b"
    - "\\b\\d{4,}\\b"
    - "\\b[0-9a-f]{8,}\\b"
    - "\\b[0-9a-f]{8}-[0-9a-f-]{8,}\\b"
    - "(?i)\\b(ticket|case|id|uuid|guid)\\b\\s*[:=]?\\s*\\w+"
  remove_urls_emails_phones: true
  normalize_numbers: "remove"   # remove | token
  number_token: "<num>"
  keep_cyrillic_latin_only: true
  min_token_len: 3
  max_token_len: 30
  drop_tokens_with_digits: true
  drop_tokens_with_underscores: true
  drop_repeated_char_tokens: true
  extra_stopwords_path: "configs/extra_stopwords.txt"
  deny_tokens_path: "configs/deny_tokens.txt"

vectorizer:
  token_pattern: null
  ngram_range: [1, 2]
  min_df: 5
  max_df: 0.5
  max_features: 200000

clustering:
  n_clusters: 12
  batch_size: 2048
  top_terms: 12
  examples_per_cluster: 8

summaries:
  top_terms_per_cluster: 12
  examples_per_cluster: 8
  use_ctfidf: true
  always_filter_top_terms: true

complaint:
  model: "logreg"
  threshold: 0.5
  seed_min_confidence: "strong_only"

novelty:
  percentile: 2
  novel_december_subclusters: 6
  examples_per_novel_cluster: 10
  emerging_terms_topn: 30
  emerging_terms_min_df: 10

output:
  labeled_baseline_xlsx: "outputs/labeled_baseline.xlsx"
  labeled_december_xlsx: "outputs/labeled_december.xlsx"
  combined_xlsx: "outputs/combined_labeled.xlsx"
  report_md: "reports/report.md"
  model_dir: "models"

random_state: 42
logging_level: "INFO"
